<!DOCTYPE HTML>
<html><head><title>Pre-processor Tests Â· in Code</title><meta name="description" content="Weblog of Justin Le, covering his various adventures in programming and explorations in the vast worlds of computation physics, and knowledge."><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><meta property="og:site_name" content="in Code"><meta property="og:description" content="Testing the entry pre-processor. It is supposed to expand out code blocks. Lorum ipsum blah blah."><meta property="og:type" content="article"><meta property="og:title" content="Pre-processor Tests"><meta property="og:image" content="http://home.jle0.com:4111/img/site_logo.jpg"><meta property="og:locale" content="en_US"><meta property="og:url" content="http://home.jle0.com:4111/entry/preprocessor-tests.html"><meta name="twitter:card" content="summary"><meta name="twitter:creator:id" content="mstk"><link rel="author" href="https://plus.google.com/107705320197444500140"><link rel="alternate" type="application/rss+xml" title="in Code (RSS Feed)" href="http://feeds.feedburner.com/justinleblogdevelopment"><link rel="canonical" href="http://home.jle0.com:4111/entry/preprocessor-tests.html"><link href="http://home.jle0.com:4111/favicon.ico" rel="shortcut icon"><link href="http://home.jle0.com:4111/css/toast.css" rel="stylesheet" type="text/css"><link href="http://home.jle0.com:4111/css/font.css" rel="stylesheet" type="text/css"><link href="http://home.jle0.com:4111/css/main.css" rel="stylesheet" type="text/css"><link href="http://home.jle0.com:4111/css/page/entry.css" rel="stylesheet" type="text/css"><link href="http://home.jle0.com:4111/css/pygments.css" rel="stylesheet" type="text/css"><script type="text/javascript">var page_data = {};
var disqus_shortname='justinleblogdevelopment';
</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-443711-7', 'jle0.com');
ga('send', 'pageview');
</script><script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-520df7c304b817b9"></script><script type="text/javascript" src="http://home.jle0.com:4111/js/page/entry_toc.js"></script><script type="text/javascript" src="http://home.jle0.com:4111/js/disqus_count.js"></script><script type="text/javascript" src="http://home.jle0.com:4111/js/social.js"></script><script type="text/javascript" src="http://home.jle0.com:4111/js/jquery/jquery.toc.js"></script><script type="text/javascript" src="http://home.jle0.com:4111/purescript/entry.js"></script></head><body><div id="fb-root"><script>(function(d, s, id) {
 var js, fjs = d.getElementsByTagName(s)[0];
 if (d.getElementById(id)) return;
 js = d.createElement(s); js.id = id;
 js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=645245675494525";
 fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script></div><div id="header-container"><div id="navbar-container" class="tile"><nav id="navbar-content"><div class="nav-info"><h1 class="site-title"><a href="http://home.jle0.com:4111/" class="nav-title">in Code</a></h1><span class="nav-author">Justin Le</span></div><ul class="nav-links"><li><a href="http://home.jle0.com:4111/">home</a></li><li><a href="http://home.jle0.com:4111/entries.html">archives</a></li><div class="clear"></div></ul></nav></div><div id="header-content"></div></div><div id="body-container" class="container"><div id="main-container" class="grid"><div class="entry-section unit span-grid" role="main"><article class="tile article"><header><h1 id="title">Pre-processor Tests</h1><p class="entry-info">by <a class="author" href="http://home.jle0.com:4111/">Justin Le</a><span class="info-separator"> &diams; </span><time datetime="2014-01-22T18:07:43Z" pubdate="" class="pubdate">Wednesday January 22, 2014</time></p><p><span class="source-info"><a class="source-link" href="https://github.com/mstksg/blog/tree/develop/copy/entries/pptest.md">Source</a><span class="info-separator"> &diams; </span><a class="source-link" href="https://github.com/mstksg/blog/tree/gh-pages/entry/preprocessor-tests.md">Markdown</a><span class="info-separator"> &diams; </span><a class="source-link" href="http://home.jle0.com:4111/entry/preprocessor-tests.tex">LaTeX</a><span class="info-separator"> &diams; </span></span>Posted in <a href="http://home.jle0.com:4111/entries/category/@tests.html" class="tag-a-category" title="@TESTS">Tests</a><span class="info-separator"> &diams; </span><a class="comment-link" href="#disqus_thread">Comments</a></p></header><hr><aside class="contents-container"><h5 id="contents-header">Contents</h5><div id="toc"></div></aside><div class="main-content copy-content"><p>Testing the entry pre-processor. It is supposed to expand out code blocks.</p>
<p>Lorum ipsum blah blah.</p>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- source: https://github.com/mstksg/blog/tree/develop/code-samples/machines/Auto.hs#L116-135</span>
<span class="co">-- interactive: https://www.fpcomplete.com/user/jle/wolf-goat-cabbage</span>
<span class="ot">onFor ::</span> forall a<span class="fu">.</span>
     (a <span class="ot">-&gt;</span> <span class="dt">Bool</span>)  <span class="co">-- test to see if an input &#39;triggers&#39;</span>
  <span class="ot">-&gt;</span> <span class="dt">Int</span>          <span class="co">-- amount of time to stay True for</span>
  <span class="ot">-&gt;</span> <span class="dt">Auto</span> a <span class="dt">Bool</span>  <span class="co">-- An Auto that takes an `a` and returns a `Bool`</span>
onFor p hold <span class="fu">=</span> wait
  <span class="kw">where</span>
<span class="ot">    wait ::</span> <span class="dt">Auto</span> a <span class="dt">Bool</span>                 <span class="co">-- the &quot;waiting&quot; state</span>
    wait <span class="fu">=</span> <span class="dt">ACons</span> <span class="fu">$</span> \input <span class="ot">-&gt;</span>
      <span class="kw">if</span> p input                        <span class="co">-- if triggered,</span>
        <span class="kw">then</span> (<span class="dt">True</span>, countdown (hold<span class="fu">-</span><span class="dv">1</span>)) <span class="co">-- jump to &quot;countdown&quot; state</span>
        <span class="kw">else</span> (<span class="dt">False</span>, wait)              <span class="co">-- otherwise, stay waiting</span>

<span class="ot">    countdown ::</span> <span class="dt">Int</span> <span class="ot">-&gt;</span> <span class="dt">Auto</span> a <span class="dt">Bool</span>     <span class="co">-- the &quot;countdown&quot; state</span>
    countdown n <span class="fu">=</span> <span class="dt">ACons</span> <span class="fu">$</span> \input <span class="ot">-&gt;</span>
      <span class="kw">if</span> p input                        <span class="co">-- if re-triggered</span>
        <span class="kw">then</span> (<span class="dt">True</span>, countdown (hold<span class="fu">-</span><span class="dv">1</span>)) <span class="co">-- countdown all over again</span>
        <span class="kw">else</span>
          <span class="kw">if</span> n <span class="fu">==</span> <span class="dv">1</span>
            <span class="kw">then</span> (<span class="dt">False</span>, wait)          <span class="co">-- If counted down, go wait again</span>
            <span class="kw">else</span> (<span class="dt">True</span>, countdown (n<span class="fu">-</span><span class="dv">1</span>))  <span class="co">-- otherwise, count down.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- source: https://github.com/mstksg/blog/tree/develop/code-samples/machines/Auto.hs#L137-137</span>
<span class="kw">data</span> <span class="dt">Command</span> k v <span class="fu">=</span> <span class="dt">Insert</span> k v <span class="fu">|</span> <span class="dt">Lookup</span> k <span class="fu">|</span> <span class="dt">Delete</span> k</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="kw">data</span> <span class="dt">Command</span> k v <span class="fu">=</span> <span class="dt">Insert</span> k v <span class="fu">|</span> <span class="dt">Lookup</span> k <span class="fu">|</span> <span class="dt">Delete</span> k</code></pre></div>
<div class="sourceCode"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span class="co">-- source: https://github.com/mstksg/blog/tree/develop/code-samples/machines/Auto.hs#L137-163</span>
<span class="co">-- interactive: https://www.fpcomplete.com/user/jle/wolf-goat-cabbage</span>
<span class="kw">data</span> <span class="dt">Command</span> k v <span class="fu">=</span> <span class="dt">Insert</span> k v <span class="fu">|</span> <span class="dt">Lookup</span> k <span class="fu">|</span> <span class="dt">Delete</span> k

<span class="ot">autoMap ::</span> forall k v<span class="fu">.</span> <span class="dt">Ord</span> k
    <span class="ot">=&gt;</span> <span class="dt">Int</span>              <span class="co">-- the maximum capacity of the map</span>
    <span class="ot">-&gt;</span> <span class="dt">Auto</span> (<span class="dt">Command</span> k v) (<span class="dt">Maybe</span> v)
autoMap cap <span class="fu">=</span> go Map.empty
  <span class="kw">where</span>
<span class="ot">    go ::</span> <span class="dt">Map.Map</span> k v <span class="ot">-&gt;</span> <span class="dt">Auto</span> (<span class="dt">Command</span> k v) (<span class="dt">Maybe</span> v)
    go m <span class="fu">=</span> <span class="dt">ACons</span> <span class="fu">$</span> \command <span class="ot">-&gt;</span>
      <span class="kw">case</span> command <span class="kw">of</span>
        <span class="dt">Insert</span> key val <span class="ot">-&gt;</span>
          <span class="kw">if</span> Map.size m <span class="fu">&gt;=</span> cap <span class="fu">&amp;&amp;</span> key <span class="ot">`Map.notMember`</span> m
            <span class="kw">then</span>
              ( <span class="dt">Nothing</span>, go m )                 <span class="co">-- Map is full, no go!</span>
            <span class="kw">else</span>
              <span class="kw">let</span> m&#39; <span class="fu">=</span> Map.insert key val m     <span class="co">-- go for it!</span>
              <span class="kw">in</span>  ( <span class="dt">Just</span> val, go m&#39; )
        <span class="dt">Lookup</span> key <span class="ot">-&gt;</span>
          ( key <span class="ot">`Map.lookup`</span> m, go m )
        <span class="dt">Delete</span> key <span class="ot">-&gt;</span>
          <span class="kw">let</span> result  <span class="fu">=</span> key <span class="ot">`Map.lookup`</span> m
              m&#39;      <span class="fu">=</span> key <span class="ot">`Map.delete`</span> m
          <span class="kw">in</span>  ( result, go m&#39; )</code></pre></div>
<p><a href="https://github.com/mstksg/blog/tree/develop/code-samples/machines/Auto.hs#L137-163">Autos</a>.</p>
<!-- ~~~haskell -->
<!-- !!!machines/Auto.hs -->
<!-- ~~~ -->
<!-- !!!*machines/Auto.hs "autoMap ::" --></div><footer><ul class="entry-series"></ul><ul class="tag-list"><li><a href="http://home.jle0.com:4111/entries/tagged/testing.html" class="tag-a-tag">#testing</a></li><li><a href="http://home.jle0.com:4111/entries/category/@tests.html" class="tag-a-category">@TESTS</a></li></ul><aside class="social-buttons"><div class="addthis_toolbox addthis_default_style addthis-buttons"><a class="addthis_button_facebook_like" fb:like:layout="button_count"></a><a class="addthis_button_tweet"></a><a class="addthis_button_google_plusone" g:plusone:size="medium"></a><a class="addthis_counter addthis_pill_style"></a></div><div class="custom-social-buttons"><div class="custom-social-button"><a href="https://www.reddit.com/submit" onclick="window.location = &#39;https://www.reddit.com/submit?url=&#39;+ encodeURIComponent(window.location); return false"><img src="https://www.reddit.com/static/spreddit7.gif" alt="submit to reddit"></a></div></div></aside><nav class="next-prev-links"><ul><li class="prev-entry-link">&larr; <a href="http://home.jle0.com:4111/entry/code-2013.html">Code 2013</a> (Previous)</li><li class="next-entry-link">(Next) <a href="http://home.jle0.com:4111/entry/blog-engine-updates-markdown-preprocessor-fay-scripts.html">Blog engine updates: Markdown Preprocessor &amp; Fay Scripts</a> &rarr;</li></ul></nav></footer></article><div class="post-entry"><div class="tile"><div id="disqus_thread"></div><script type="text/javascript">var disqus_config = function () {
    this.page.url = 'http://home.jle0.com:4111/entry/preprocessor-tests.html';
    this.page.identifier = 'pptest';
};
(function() {
    var d = document, s = d.createElement('script');
    s.src = '//justinleblogdevelopment.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a><br></noscript><a href="http://disqus.com" class="dsq-brlink">Comments powered by <span class="logo-disqus">Disqus</span></a></div></div></div></div></div><div id="footer-container"><div id="footer-content"><div class="tile"><div class="footer-copyright">&copy; 2016 Justin Le</div><div class="footer-follow social-follows"><ul class="social-follows-list"><li><ul class="social-follows-list-social"><li><a class="social-follow-facebook" title="Friend me on Facebook!" href="https://facebook.com/mstksg">Facebook</a></li><li><a class="social-follow-twitter" title="Follow me on Twitter!" href="https://twitter.com/intent/user?user_id=mstk" onclick="window.open(
  &#39;http://twitter.com/intent/user?user_id=907281&#39;,
  &#39;facebook-share-dialog&#39;,
  &#39;width=550,height=520&#39;);
return false;
">Twitter</a></li><li><a class="social-follow-gplus" title="Add me on Google+!" href="https://plus.google.com/+JustinLe">Google+</a></li><li><a class="social-follow-linkedin" title="Connect with me on LinkedIn!" href="https://linkedin.com/in/lejustin">LinkedIn</a></li><li><a class="social-follow-github" title="Fork me on Github!" href="https://github.com/mstksg">Github</a></li><li><a class="social-follow-keybase" title="Track me on Keybase!" href="https://keybase.io/mstksg">Keybase</a></li><li><a class="social-follow-bitcoin" title="Donate via bitcoin!" href="https://coinbase.com/mstksg">Bitcoin</a></li></ul></li><li><ul class="social-follows-list-site"><li><a class="social-follow-rss" title="Subscribe to my RSS Feed!" href="http://feeds.feedburner.com/justinleblogdevelopment">RSS</a></li><li><a class="social-follow-email" title="Subscribe to the mailing list!" href="https://feedburner.google.com/fb/a/mailverify?loc=en_US&amp;uri=justinleblogdevelopment">Mailing list</a></li></ul></li></ul></div></div></div></div></body></html>